{
  "builders": [
    {
      "changes": [
        "LABEL maintainer {{user `maintainer`}}",
        "EXPOSE 8080",
        "CMD catalina.sh run"
      ],
      "run_command": [
        "-d",
        "-i",
        "-t",
        "{{.Image}}",
        "/bin/bash"
      ],
      "commit": true,
      "image": "tomcat",
      "type": "docker"
    }
  ],
 "post-processors": [
    [
      {
        "repository": "{{user `aws_ecr_url`}}/tomcat_backbase",
        "tags": [
          "latest"
        ],
        "type": "docker-tag"
      },
      {
        "type": "docker-push",
        "ecr_login": true,
        "login_server": "{{user `aws_ecr_url`}}"
      }
    ]
  ],
  "variables": {
    "maintainer": "\"Giordano Fechio <gfechio@gmail.com>\"",
    "aws_ecr_url": "{{ user `account_id` }}.dkr.ecr.eu-central-1.amazonaws.com"
  }
}
